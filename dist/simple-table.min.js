angular.module("simpletable",["simpletable.table","simpletable.factory","simpletable.reorder","simpletable.resizable","simpletable.uuid.util"]).value("version","0.1");var SimpleTablePlugin;!function(SimpleTablePlugin){var BaseSimpleTablePlugin=function(){function BaseSimpleTablePlugin(){this.isInitializationComplete=!1}return BaseSimpleTablePlugin.prototype.init=function(){this.addEventListeners()},BaseSimpleTablePlugin.prototype.doRegister=function(parent){this.parent=parent?parent:this.parent,this.parent.registerPlugin(this)},BaseSimpleTablePlugin.prototype.onRegistered=function(simpleTable){this.simpleTable=simpleTable,this.init(),this.isInitializationComplete=!0},BaseSimpleTablePlugin.prototype.isInitialized=function(){return this.isInitializationComplete},BaseSimpleTablePlugin.prototype.addEventListeners=function(){},BaseSimpleTablePlugin.prototype.removeEventListeners=function(){},BaseSimpleTablePlugin.prototype.notifyListener=function(eventName,params){this.simpleTable&&this.simpleTable.notifyListener(eventName,params)},BaseSimpleTablePlugin}();SimpleTablePlugin.BaseSimpleTablePlugin=BaseSimpleTablePlugin}(SimpleTablePlugin||(SimpleTablePlugin={}));var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SimpleTableSelection;!function(SimpleTableSelection){var SimpleTablePluginSelection=function(_super){function SimpleTablePluginSelection(){_super.apply(this,arguments),this.selectedRows=[]}return __extends(SimpleTablePluginSelection,_super),SimpleTablePluginSelection.prototype.init=function(){this.scope=this.simpleTable.scope,_super.prototype.init.call(this),this.simpleTable.selection=this},SimpleTablePluginSelection.prototype.addEventListeners=function(){_super.prototype.addEventListeners.call(this),this.scope.$on("onRowClicked",angular.bind(this,this.onRowClicked)),this.scope.$on("$destroy",this.removeEventListeners)},SimpleTablePluginSelection.prototype.removeEventListeners=function(){},SimpleTablePluginSelection.prototype.isRowSelected=function(row){return this.selectedRows.indexOf(row)>-1},SimpleTablePluginSelection.prototype.setSelectedRows=function(rows){this.selectedRows.length=0;for(var i=0;i<rows.length;i++)this.addSelectedRow(rows[i])},SimpleTablePluginSelection.prototype.onRowClicked=function(scopeEvent,$event,row){this.addSelectedRow(row)},SimpleTablePluginSelection.prototype.addSelectedRow=function(row){return this.isRowValid(row)?this.scope.tableConfig.selectionMultiple?this.doMultipleSelection(row):this.doSingleSelection(row):void 0},SimpleTablePluginSelection.prototype.doSingleSelection=function(row){var index=this.selectedRows.indexOf(row);this.selectedRows.length=0,index>-1||this.selectedRows.push(row)},SimpleTablePluginSelection.prototype.doMultipleSelection=function(row){var index=this.selectedRows.indexOf(row);return index>-1?this.selectedRows.splice(index,1):void this.selectedRows.push(row)},SimpleTablePluginSelection.prototype.isRowValid=function(row){return this.simpleTable.scope.tableData.indexOf(row)>-1},SimpleTablePluginSelection.prototype.revalidateSelection=function(){this.setSelectedRows(this.selectedRows.slice())},SimpleTablePluginSelection.prototype.onDataChanged=function(newValue,oldValue){this.revalidateSelection()},SimpleTablePluginSelection}(SimpleTablePlugin.BaseSimpleTablePlugin);SimpleTableSelection.SimpleTablePluginSelection=SimpleTablePluginSelection}(SimpleTableSelection||(SimpleTableSelection={}));var SimpleTableSort;!function(SimpleTableSort){var SimpleTablePluginSort=function(_super){function SimpleTablePluginSort(){_super.apply(this,arguments),this.currentSortColumn=null,this.currentSort=null,this.currentSortReverse=!1}return __extends(SimpleTablePluginSort,_super),SimpleTablePluginSort.prototype.init=function(){this.scope=this.simpleTable.scope,_super.prototype.init.call(this),this.simpleTable.sortManager=this},SimpleTablePluginSort.prototype.addEventListeners=function(){_super.prototype.addEventListeners.call(this),this.scope.$on("onHeaderClicked",angular.bind(this,this.onHeaderClicked))},SimpleTablePluginSort.prototype.removePreviousSortFromColumns=function(columns){for(var i=0;i<columns.length;i++){var column=columns[i];column.sorted=!1,this.applyColumnSortState(column)}},SimpleTablePluginSort.prototype.markColumnAsSorted=function(column){column.sorted=!0,column.sortType=column.sortType?column.sortType:"asc"},SimpleTablePluginSort.prototype.applyColumnSortState=function(column){return column.headerClass||(column.headerClass=[]),column.sorted?void this.addToArray(column.headerClass,["sort",column.sortType]):void this.removeFromArray(column.headerClass,["sort","asc","desc"])},SimpleTablePluginSort.prototype.applySort=function(column){this.currentSort=column.field,this.currentSortReverse="asc"===column.sortType?!1:!0,this.currentSortColumn=column,this.applyColumnSortState(column)},SimpleTablePluginSort.prototype.sortByColumn=function(column){this.notifyListener("onSortStart",column),this.removePreviousSortFromColumns(this.scope.tableConfig.columns),this.markColumnAsSorted(column),this.applySort(column),this.notifyListener("onSortEnd",column)},SimpleTablePluginSort.prototype.onHeaderClicked=function(scopeEvent,$event,column){this.notifyListener("onHeaderSortStart",column),this.switchColumnSortType(column),this.sortByColumn(column),this.notifyListener("onHeaderSortEnd",column)},SimpleTablePluginSort.prototype.revalidateSort=function(){this.currentSortColumn&&this.applySort(this.currentSortColumn)},SimpleTablePluginSort.prototype.onDataChanged=function(newValue,oldValue){this.revalidateSort()},SimpleTablePluginSort.prototype.switchColumnSortType=function(column){column.sortType=column.sortType&&"desc"!==column.sortType?"desc":"asc"},SimpleTablePluginSort.prototype.setSortByColumn=function(column,sortType){column.sortType=sortType,this.sortByColumn(column)},SimpleTablePluginSort.prototype.addToArray=function(array,values){for(var i=0;i<values.length;i++){var value=values[i],indx=array.indexOf(value);indx>-1||array.push(value)}return array},SimpleTablePluginSort.prototype.removeFromArray=function(array,values){if(0!==array.length){for(var i=0;i<values.length;i++){var value=values[i],indx=array.indexOf(value);0>indx||array.splice(indx,1)}return array}},SimpleTablePluginSort}(SimpleTablePlugin.BaseSimpleTablePlugin);SimpleTableSort.SimpleTablePluginSort=SimpleTablePluginSort}(SimpleTableSort||(SimpleTableSort={}));var SimpleTablePluginFactory;!function(_SimpleTablePluginFactory){var SimpleTablePluginFactory=function(){function SimpleTablePluginFactory(){}return SimpleTablePluginFactory.prototype.newPluginSelection=function(){return console.log("creating new SimpleTablePluginSelection"),new SimpleTableSelection.SimpleTablePluginSelection},SimpleTablePluginFactory.prototype.newPluginSort=function(){return console.log("creating new SimpleTablePluginSort"),new SimpleTableSort.SimpleTablePluginSort},SimpleTablePluginFactory}();_SimpleTablePluginFactory.SimpleTablePluginFactory=SimpleTablePluginFactory}(SimpleTablePluginFactory||(SimpleTablePluginFactory={})),console.log("Creating angular module...: simpletable.factory"),angular.module("simpletable.factory",[]).service("SimpleTablePluginFactory",[function(){return console.log("instantiating service..."),new SimpleTablePluginFactory.SimpleTablePluginFactory}]);var SimpleTableReorder;!function(SimpleTableReorder){var SimpleTableReorderUuidUtil=function(){function SimpleTableReorderUuidUtil(){}return SimpleTableReorderUuidUtil.prototype["new"]=function(){function _p8(s){var p=(Math.random().toString(16)+"000000000").substr(2,8);return s?"-"+p.substr(0,4)+"-"+p.substr(4,4):p}return _p8()+_p8(!0)+_p8(!0)+_p8()},SimpleTableReorderUuidUtil.prototype.empty=function(){return"00000000-0000-0000-0000-000000000000"},SimpleTableReorderUuidUtil}();SimpleTableReorder.SimpleTableReorderUuidUtil=SimpleTableReorderUuidUtil}(SimpleTableReorder||(SimpleTableReorder={}));var SimpleTableReorder;!function(SimpleTableReorder){var SimpleTableReorderDrag=function(_super){function SimpleTableReorderDrag(rootScope,scope,element,attrs){_super.call(this),this.DRAG_START_EVENT="dragstart",this.DRAG_END_EVENT="dragend",this.SIMPLE_TABLE_DRAG_START_EVENT="simpleTableDragStartEvent",this.SIMPLE_TABLE_DRAG_END_EVENT="simpleTableDragEndEvent",this.rootScope=rootScope,this.scope=scope,this.element=element,this.attrs=attrs,this.init()}return __extends(SimpleTableReorderDrag,_super),SimpleTableReorderDrag.prototype.init=function(){this.initUuid(),_super.prototype.init.call(this)},SimpleTableReorderDrag.prototype.addEventListeners=function(){_super.prototype.addEventListeners.call(this);var self=this;this.element.bind(this.DRAG_START_EVENT,function(event){return self.onDragStartHandler(event)}),this.element.bind(this.DRAG_END_EVENT,function(event){return self.onDragEndHandler(event)})},SimpleTableReorderDrag.prototype.initUuid=function(){this.uuid=new SimpleTableReorder.SimpleTableReorderUuidUtil,angular.element(this.element).attr("draggable","true");var scope=angular.element(this.element).scope(),id=scope.hcol.id;id||(id=this.uuid["new"](),angular.element(this.element).attr("id",id)),this.id=id},SimpleTableReorderDrag.prototype.onDragStartHandler=function(event){event.dataTransfer.setData("text",this.id),this.rootScope.$emit(this.SIMPLE_TABLE_DRAG_START_EVENT)},SimpleTableReorderDrag.prototype.onDragEndHandler=function(event){this.rootScope.$emit(this.SIMPLE_TABLE_DRAG_END_EVENT)},SimpleTableReorderDrag}(SimpleTablePlugin.BaseSimpleTablePlugin);SimpleTableReorder.SimpleTableReorderDrag=SimpleTableReorderDrag}(SimpleTableReorder||(SimpleTableReorder={}));var SimpleTableReorder;!function(SimpleTableReorder){var SimpleTableReorderDrop=function(_super){function SimpleTableReorderDrop(rootScope,scope,element,attrs){_super.call(this),this.DRAG_OVER_EVENT="dragover",this.DRAG_ENTER_EVENT="dragenter",this.DRAG_LEAVE_EVENT="dragleave",this.DROP_EVENT="drop",this.SIMPLE_TABLE_DRAG_START_EVENT="simpleTableDragStartEvent",this.SIMPLE_TABLE_DRAG_END_EVENT="simpleTableDragEndEvent",this.rootScope=rootScope,this.scope=scope,this.element=element,this.attrs=attrs,this.init()}return __extends(SimpleTableReorderDrop,_super),SimpleTableReorderDrop.prototype.init=function(){this.initUuid(),_super.prototype.init.call(this)},SimpleTableReorderDrop.prototype.addEventListeners=function(){_super.prototype.addEventListeners.call(this);var self=this;this.element.bind(this.DRAG_OVER_EVENT,this.onDragOverHandler),this.element.bind(this.DRAG_ENTER_EVENT,this.onDragEnterHandler),this.element.bind(this.DRAG_LEAVE_EVENT,this.onDragLeaveHandler),this.element.bind(this.DROP_EVENT,function(event){return self.onDropHandler(event)}),this.rootScope.$on(this.SIMPLE_TABLE_DRAG_START_EVENT,function(){return self.onDragStartHandler()}),this.rootScope.$on(this.SIMPLE_TABLE_DRAG_END_EVENT,function(){return self.onDragEndHandler()})},SimpleTableReorderDrop.prototype.initUuid=function(){this.uuid=new SimpleTableReorder.SimpleTableReorderUuidUtil;var id=angular.element(this.element).attr("id");id||(id=this.uuid["new"](),angular.element(this.element).attr("id",id)),this.id=id},SimpleTableReorderDrop.prototype.onDragOverHandler=function(event){return event.preventDefault&&event.preventDefault(),event.dataTransfer.dropEffect="move",!1},SimpleTableReorderDrop.prototype.onDragEnterHandler=function(event){angular.element(event.target).addClass("simple-table-over")},SimpleTableReorderDrop.prototype.onDragLeaveHandler=function(event){angular.element(event.target).removeClass("simple-table-over")},SimpleTableReorderDrop.prototype.onDropHandler=function(event){event.preventDefault&&event.preventDefault(),event.stopPropagation&&event.stopPropagation();var parent=this.scope.$parent,tableConfig=parent.tableConfig,columns=tableConfig.columns,data=event.dataTransfer.getData("text"),src=angular.element("#"+data),srcData=angular.element(src)[0],oldIndex=this.getIndexById(columns,srcData.id),dest=angular.element(event.target)[0],newIndex=this.getIndexById(columns,dest.id),dataColumn=columns[oldIndex];columns.splice(oldIndex,1),newIndex===columns.length?columns[newIndex]=dataColumn:columns.splice(newIndex,0,dataColumn),angular.element(event.target).removeClass("simple-table-over"),this.scope.onSymbolDrop({}),this.scope.$apply()},SimpleTableReorderDrop.prototype.getIndexById=function(columns,id){for(var i=0;i<columns.length;i++)if(columns[i].id===id)return i;return 0},SimpleTableReorderDrop.prototype.onDragStartHandler=function(){var element=document.getElementById(this.id);angular.element(element).addClass("simple-table-target")},SimpleTableReorderDrop.prototype.onDragEndHandler=function(){var element=document.getElementById(this.id);angular.element(element).removeClass("simple-table-target"),angular.element(element).removeClass("simple-table-over")},SimpleTableReorderDrop}(SimpleTablePlugin.BaseSimpleTablePlugin);SimpleTableReorder.SimpleTableReorderDrop=SimpleTableReorderDrop}(SimpleTableReorder||(SimpleTableReorder={})),angular.module("simpletable.reorder",["simpletable.uuid.util"]).directive("stTableDraggable",["$timeout","$rootScope","simpletableuuid",function($timeout,$rootScope,uuid){return{require:"^stTable",link:function(scope,element,attrs,parentCtrl){return new SimpleTableReorder.SimpleTableReorderDrag($rootScope,scope,element,attrs)}}}]).directive("stTableDropTarget",["$timeout","$rootScope","simpletableuuid",function($timeout,$rootScope,uuid){return{require:"^stTable",restrict:"A",scope:{onSymbolDrop:"&"},link:function(scope,element,attrs,controller){return new SimpleTableReorder.SimpleTableReorderDrop($rootScope,scope,element,attrs)}}}]),angular.module("simpletable.uuid.util",[]).factory("simpletableuuid",function(){var svc={"new":function(){function _p8(s){var p=(Math.random().toString(16)+"000000000").substr(2,8);return s?"-"+p.substr(0,4)+"-"+p.substr(4,4):p}return _p8()+_p8(!0)+_p8(!0)+_p8()},empty:function(){return"00000000-0000-0000-0000-000000000000"}};return svc});var SimpleTableResize;!function(_SimpleTableResize){var SimpleTableResize=function(){function SimpleTableResize(scope,element,attrs,$window){this.RESIZE_TYPE_FIXED="fixed",this.RESIZE_TYPE_ADJUSTABLE="adjustable",this.WIDTH_PIXELS_TYPE="px",this.WIDTH_PERCENTAGE_TYPE="%",this.initializationComplete=!1,this.minColumnWidth=25,this.isMouseDown=!1,this.startX=0,this.indexColumnResize=0,this.orginalColumnWidth=0,this.parentMoveHandle=null,this.table=null,this.tableHeaderColumnList=null,this.originalTableWidth=0,this.scope=scope,this.element=element,this.attrs=attrs,this.$window=$window}return SimpleTableResize.prototype.init=function(){this.initializationComplete=!0,this.addEventListeners()},SimpleTableResize.prototype.isInitialized=function(){return this.initializationComplete},SimpleTableResize.prototype.addEventListeners=function(){},SimpleTableResize.prototype.removeEventListeners=function(){},SimpleTableResize.prototype.onMouseDownHandler=function(event,scope,element){if(event.preventDefault&&event.preventDefault(),event.stopPropagation&&event.stopPropagation(),!this.table){var th=angular.element(element).parent(),tr=angular.element(th).parent(),tHead=angular.element(tr).parent();this.tableHeaderColumnList=angular.element(tr).children(),this.table=angular.element(tHead).parent()}this.parentMoveHandle=angular.element(element).parent(),this.isMouseDown=!0,this.startX=event.clientX,this.indexColumnResize=scope.$index,this.orginalColumnWidth=scope.hcol.style.width,this.originalTableWidth=angular.element(this.table).width();var self=this;angular.element("body").addClass("resize-cursor"),angular.element(this.table).addClass("resize-cursor"),angular.element(this.$window).on("mousemove",function(event){var parentScope=self.scope;parentScope.simpleTableResize.onMouseMoveHandler(event,scope,element)}),angular.element(this.$window).on("mouseup",function(event){var parentScope=self.scope;parentScope.simpleTableResize.onMouseUpHandler(event,scope,element)})},SimpleTableResize.prototype.onMouseMoveHandler=function(event,scope,element){if(this.isMouseDown){var tableConfig=scope.tableConfig;tableConfig.resizeType===this.RESIZE_TYPE_FIXED&&this.updateFixedTableColumns(event,tableConfig,scope),tableConfig.resizeType===this.RESIZE_TYPE_ADJUSTABLE&&this.updateAdjustableTableColumns(event,tableConfig,scope)}},SimpleTableResize.prototype.updateFixedTableColumns=function(event,tableConfig,scope){var width=0;width=event.clientX-this.startX,tableConfig.columns[this.indexColumnResize].style.width=this.calculateNewColumnWidth(tableConfig,this.orginalColumnWidth,width),this.isMinColumnWidth(this.orginalColumnWidth,width)||(tableConfig.tableWidth=this.calculateNewTableWidth(width)),scope.$apply()},SimpleTableResize.prototype.calculateNewTableWidth=function(extraWidth){var newWidth=this.originalTableWidth+extraWidth;return newWidth+this.WIDTH_PIXELS_TYPE},SimpleTableResize.prototype.updateAdjustableTableColumns=function(event,tableConfig,scope){var width=0;width=event.clientX-this.startX,tableConfig.columns[this.indexColumnResize].style.width=this.calculateNewColumnWidth(tableConfig,this.orginalColumnWidth,width),scope.$apply()},SimpleTableResize.prototype.calculateNewColumnWidth=function(tableConfig,actualWidth,moveWidth){var widthType=this.getWidthType(actualWidth);return widthType===this.WIDTH_PIXELS_TYPE?this.calculatePixels(actualWidth,moveWidth):widthType===this.WIDTH_PERCENTAGE_TYPE?this.calculatePercentage(tableConfig,actualWidth,moveWidth):actualWidth},SimpleTableResize.prototype.calculatePixels=function(actualWidth,moveWidth){var columnWidth=this.getWidthInNumber(actualWidth);return columnWidth+=moveWidth,this.minColumnWidth>columnWidth&&(columnWidth=this.minColumnWidth),columnWidth+this.WIDTH_PIXELS_TYPE},SimpleTableResize.prototype.calculatePercentage=function(tableConfig,actualWidth,moveWidth){var columnWidthPercent=this.getWidthInNumber(actualWidth),columnWidth=0;columnWidth=tableConfig.resizeType===this.RESIZE_TYPE_FIXED?(this.originalTableWidth+moveWidth)*columnWidthPercent/100:this.originalTableWidth*columnWidthPercent/100,columnWidth+=moveWidth,this.minColumnWidth>columnWidth&&(columnWidth=this.minColumnWidth);var newPercentage=0;return newPercentage=tableConfig.resizeType===this.RESIZE_TYPE_FIXED?columnWidth/(this.originalTableWidth+moveWidth)*100:columnWidth/this.originalTableWidth*100,newPercentage+this.WIDTH_PERCENTAGE_TYPE},SimpleTableResize.prototype.isMinColumnWidth=function(actualWidth,moveWidth){var widthType=this.getWidthType(actualWidth),columnWidth=this.getWidthInNumber(actualWidth);return widthType===this.WIDTH_PERCENTAGE_TYPE&&(columnWidth=this.originalTableWidth*columnWidth/100),columnWidth+=moveWidth,this.minColumnWidth>columnWidth?!0:!1},SimpleTableResize.prototype.onMouseUpHandler=function(event,scope,element){angular.element("body").removeClass("resize-cursor"),angular.element(this.table).removeClass("resize-cursor"),angular.element(this.$window).off("mousemove"),angular.element(this.$window).off("mouseup"),this.isMouseDown=!1;var columnData=scope.hcol,tableConfig=scope.$parent.tableConfig;tableConfig.resizeType===this.RESIZE_TYPE_ADJUSTABLE&&this.updateOtherColumns(columnData,tableConfig)},SimpleTableResize.prototype.updateOtherColumns=function(columnData,tableConfig){var oldWidth=this.getWidthInNumber(this.orginalColumnWidth),newWidth=this.getWidthInNumber(columnData.style.width);return newWidth>oldWidth?void this.removeWidth(newWidth-oldWidth,tableConfig,columnData.id):oldWidth>newWidth?void this.addWidth(oldWidth-newWidth,tableConfig,columnData.id):void 0},SimpleTableResize.prototype.addWidth=function(widthToAdd,tableConfig,updatedColumnId){for(var i=0;i<this.tableHeaderColumnList.length;i++){var th=this.tableHeaderColumnList[i];if(updatedColumnId!==th.id){var column=this.getColumnDataById(th.id,tableConfig),type=this.getWidthType(column.style.width),originalWidth=angular.element(th).width();column.style.width=this.convertToPixelsOrPercentage(originalWidth,type)}}},SimpleTableResize.prototype.removeWidth=function(widthToRemove,tableConfig,updatedColumnId){for(var i=0;i<this.tableHeaderColumnList.length;i++){var th=this.tableHeaderColumnList[i];if(updatedColumnId!==th.id){var column=this.getColumnDataById(th.id,tableConfig),type=this.getWidthType(column.style.width),originalWidth=angular.element(th).width();column.style.width=this.convertToPixelsOrPercentage(originalWidth,type)}}},SimpleTableResize.prototype.convertToPixelsOrPercentage=function(originalWidth,widthType){if(widthType===this.WIDTH_PIXELS_TYPE)return originalWidth+this.WIDTH_PIXELS_TYPE;var newWidth=originalWidth/this.originalTableWidth*100;return newWidth+this.WIDTH_PERCENTAGE_TYPE},SimpleTableResize.prototype.getColumnDataById=function(id,tableConfig){for(var i=0;i<tableConfig.columns.length;i++){var column=tableConfig.columns[i];if(id===column.id)return column}return null},SimpleTableResize.prototype.getWidthInNumber=function(width){var stringWidth="",widthType=this.getWidthType(width);stringWidth=widthType===this.WIDTH_PIXELS_TYPE?width.substring(0,width.length-2):width.substring(0,width.length-1);var columnWidth=parseFloat(stringWidth);return columnWidth},SimpleTableResize.prototype.getWidthType=function(width){var widthType=width.substring(width.length-2,width.length);return widthType===this.WIDTH_PIXELS_TYPE?this.WIDTH_PIXELS_TYPE:this.WIDTH_PERCENTAGE_TYPE},SimpleTableResize}();_SimpleTableResize.SimpleTableResize=SimpleTableResize}(SimpleTableResize||(SimpleTableResize={})),angular.module("simpletable.resizable",[]).directive("stTableResizable",["$timeout","$window",function($timeout,$window){return{require:"^stTable",restrict:"A",controller:function($scope,$element,$attrs){return $scope.simpleTableResize||($scope.simpleTableResize=new SimpleTableResize.SimpleTableResize($scope,$element,$attrs,$window)),this.getParent=function(){return $scope.simpleTableResize},$scope.simpleTableResize},link:function($scope,$element,$attrs,parent){return $scope.simpleTableResize||($scope.simpleTableResize=new SimpleTableResize.SimpleTableResize($scope,$element,$attrs,$window)),$scope.simpleTableResize.parent=parent,$scope.simpleTableResize.init(),$scope.simpleTableResize}}}]).directive("stTableResizableHandler",["$timeout",function($timeout){return{require:"^stTableResizable",restrict:"A",link:function(scope,element,attrs,parentCtrl){element.on("mousedown",function(event){parentCtrl.getParent().onMouseDownHandler(event,scope,element)})}}}]);var SimpleTable;!function(_SimpleTable){var SimpleTable=function(){function SimpleTable(scope,element,attrs,$timeout,pluginFactory){this.plugins=[],this.initializationComplete=!1,this.scope=scope,this.element=element,this.attrs=attrs,this.$timeout=$timeout,this.pluginFactory=pluginFactory,this.scope.simpleTable=this,this.init(),console.log("SimpleTable created: ",this.scope)}return SimpleTable.prototype.init=function(){this.notifyPreInitialization(),this.addEventListeners(),this.validateConfig(),this.initDefaultPlugins()},SimpleTable.prototype.registerPlugin=function(plugin){console.log("initializing plugins...",plugin),this.plugins.push(plugin),this.initPlugins()},SimpleTable.prototype.initPlugins=function(){this.initPluginTimeout&&(this.$timeout.cancel(this.initPluginTimeout),this.initPluginTimeout=null),this.initPluginTimeout=this.$timeout(angular.bind(this,this.doInitPlugins),0)},SimpleTable.prototype.addEventListeners=function(){this.scope.$on("$destroy",this.removeEventListeners),this.scope.$watch("tableData",angular.bind(this,this.onDataChanged))},SimpleTable.prototype.removeEventListeners=function(){console.log("removing listeners...",this)},SimpleTable.prototype.validateConfig=function(){},SimpleTable.prototype.initDefaultPlugins=function(){this.pluginFactory.newPluginSelection().doRegister(this),this.pluginFactory.newPluginSort().doRegister(this)},SimpleTable.prototype.doInitPlugins=function(){var self=this;angular.forEach(this.plugins,function(plugin){plugin.isInitialized()||plugin.onRegistered(self)}),this.notifyInitializationComplete()},SimpleTable.prototype.onDataChanged=function(newValue,oldValue){console.log("SimpleTable.onDataChanged...: ",this.initializationComplete),this.initializationComplete&&this.notifyPluginsDataChanged(newValue,oldValue)},SimpleTable.prototype.onRowClicked=function($event,row){this.scope.$broadcast("onRowClicked",$event,row),this.notifyListener("onRowClicked",[$event,row])},SimpleTable.prototype.onRowDoubleClicked=function($event,row){this.scope.$broadcast("onRowDoubleClicked",$event,row),this.notifyListener("onRowDoubleClicked",[$event,row])},SimpleTable.prototype.onRowMouseEnter=function($event,row){this.scope.$broadcast("onRowMouseEnter",$event,row),this.notifyListener("onRowMouseEnter",[$event,row])},SimpleTable.prototype.onRowMouseLeave=function($event,row){this.scope.$broadcast("onRowMouseLeave",$event,row),this.notifyListener("onRowMouseLeave",[$event,row])},SimpleTable.prototype.onHeaderClicked=function($event,column){console.log("Header clicked: ",arguments),this.scope.$broadcast("onHeaderClicked",$event,column)},SimpleTable.prototype.notifyPreInitialization=function(){this.notifyListener("onPreInitialization",this)},SimpleTable.prototype.notifyInitializationComplete=function(){this.initializationComplete||(this.initializationComplete=!0,this.notifyListener("onInitializationComplete",this))},SimpleTable.prototype.notifyListener=function(eventName,params){this.scope.tableConfig.listeners&&this.scope.tableConfig.listeners[eventName]&&this.scope.tableConfig.listeners[eventName](params)},SimpleTable.prototype.notifyPluginsDataChanged=function(newValue,oldValue){for(var i=0;i<this.plugins.length;i++){var plugin=this.plugins[i];plugin.onDataChanged&&plugin.onDataChanged(newValue,oldValue)}},SimpleTable}();_SimpleTable.SimpleTable=SimpleTable}(SimpleTable||(SimpleTable={})),angular.module("simpletable.table",[]).directive("stTable",["$timeout","SimpleTablePluginFactory",function($timeout,SimpleTablePluginFactory){return{restrict:"AE",transclude:!0,scope:{tableConfig:"=",tableData:"="},controller:function($scope,$element,$attrs){return new SimpleTable.SimpleTable($scope,$element,$attrs,$timeout,SimpleTablePluginFactory)},template:"<div ng-style='{width:tableConfig.tableWidth}'>  <table ng-class='tableConfig.classes' ng-style='{width:tableConfig.tableWidth}'>    <thead>      <tr>        <th id='{{hcol.id}}' class='table-header'          ng-click='simpleTable.onHeaderClicked($event, hcol)'          ng-repeat='hcol in tableConfig.columns'          ng-class='hcol.headerClass' ng-if='hcol.active'          ng-style='{\"height\":tableConfig.headerHeight, \"min-width\":hcol.style.minWidth, \"width\":hcol.style.width}'          st-table-drop-target='true' st-table-draggable='true'>          {{hcol.title}}          <div st-table-resizable-handler class='table-header-cursor-container'></div>        </th>      </tr>    </thead>    <tbody ng-if='!tableConfig.rowTemplate'>      <tr ng-click='simpleTable.onRowClicked($event, row)' ng-class='{selected: simpleTable.selection.isRowSelected(row)}'           ng-dblclick='simpleTable.onRowDoubleClicked($event, row)'           ng-mouseenter='simpleTable.onRowMouseEnter($event, row)' ng-mouseleave='simpleTable.onRowMouseLeave($event, row)'         ng-repeat='row in tableData | filter:tableConfig.filter | orderBy:simpleTable.sortManager.currentSort:simpleTable.sortManager.currentSortReverse ' >        <td ng-repeat='col in tableConfig.columns' ng-class='col.cellClass' ng-if='col.active' >          <span ng-if='!col.template'>{{row[col.field]}}</span>           <span ng-if='!!col.template' ng-include='col.template'></span>         </td>      </tr>    </tbody>    <tbody ng-if='tableConfig.rowTemplate' ng-include='tableConfig.rowTemplate'>    </tbody>  </table></div>"}}]);
//# sourceMappingURL=simple-table.min.js.map